# 7주차 개발 작업 명세서

## 1. 개요

기존의 `Article` 기반 게시판(title, content 필드)을 확장하여, `user`, `newdate`, `count`, `likec` 등 추가 필드를 가진 **새로운 `Board` 게시판**을 구현합니다.
작업 범위는 신규 Entity, Repository, Controller 매핑, View(HTML) 파일 생성을 포함하며, 기존 Service 로직을 수정하여 `Board` 객체를 처리하도록 합니다.

---

## 2. 작업 목록

### 2.1. 데이터베이스 및 Entity 계층 (Domain)

1.  **`Board.java` Entity 생성**
    * `com.example.demo.model.domain` 패키지에 `Board.java` 클래스를 생성합니다. (기존 `Article.java` 복사 후 수정 권장)
    * 클래스 레벨에 `@Entity` 어노테이션을 추가합니다.
    * [cite_start]`@Table(name = "board")` 어노테이션을 추가하여 DB 테이블명을 'board'로 지정합니다. [cite: 648]
    * [cite_start]Lombok 어노테이션 (`@Getter`, `@NoArgsConstructor(access = AccessLevel.PROTECTED)`)을 추가합니다. [cite: 646, 648]
    * 기존 `id`, `title`, `content` 필드를 유지합니다. (`@Id`, `@GeneratedValue`, `@Column` 설정 포함) [cite_start][cite: 650-652]
    * [cite_start]**다음 필드를 `Board.java`에 추가합니다:** [cite: 656-660]
        ```java
        @Column(name = "user", nullable = false)
        private String user = "";

        @Column(name = "newdate", nullable = false)
        private String newdate = "";

        @Column(name = "count", nullable = false)
        private String count = "";

        @Column(name = "likec", nullable = false)
        private String likec = "";
        ```
    * **`@Builder` 생성자 수정:**
        * `Article`에서 복사한 `@Builder` 생성자의 파라미터에 `String user`, `String newdate`, `String count`, `String likec`를 추가하고, `this` 필드에 할당합니다. [cite_start](7주차 연습문제 수정사항 [cite: 968] [cite_start]/ 5주차 `toEntity` 로직 [cite: 1381-1389]을 위해 필수)

### 2.2. 데이터 접근 계층 (Repository)

1.  **`BoardRepository.java` 인터페이스 생성**
    * `com.example.demo.model.repository` 패키지에 `BoardRepository.java` 인터페이스를 생성합니다. (기존 `BlogRepository.java` 복사 후 수정 권장) [cite_start][cite: 746-747]
    * [cite_start]`JpaRepository<Board, Long>`를 상속받도록 수정합니다. [cite: 749]
    * `@Repository` 어노테이션을 추가합니다.

### 2.3. 서비스 계층 (Service)

1.  [cite_start]**`BlogService.java` 수정** [cite: 763-784]
    * `BlogRepository` 대신 `BoardRepository`를 주입받도록 필드를 수정합니다. (`private final BoardRepository boardRepository;`)
    * `findAll()` 메소드의 반환 타입을 `List<Board>`로 수정하고, `boardRepository.findAll()`을 호출하도록 변경합니다.
    * `findById(Long id)` 메소드를 **신규 추가**하며, 반환 타입은 `Optional<Board>`로 하고 `boardRepository.findById(id)`를 호출하도록 작성합니다.
    * [cite_start](수정 기능을 위한 `update` 메소드도 `Board` 객체를 처리하도록 수정/확인합니다. [cite: 967-971])
    * [cite_start](글쓰기 기능을 위한 `save` 메소드도 `Board` 객체를 처리하도록 수정/확인합니다. [cite: 1391-1397])

### 2.4. DTO 계층 (DTO)

1.  **`AddArticleRequest.java` DTO 수정**
    * (7주차 연습문제 및 글쓰기 기능 구현을 위해) [cite_start]`AddArticleRequest.java` DTO 클래스에 `Board` Entity에 추가된 `user`, `newdate`, `count`, `likec` 필드를 `private String` 타입으로 **추가**합니다. [cite: 1377-1380]
    * [cite_start]`toEntity()` 메소드를 `Board` 객체를 반환하도록 수정하고, `Board.builder()`를 사용하여 모든 필드(추가된 4개 포함)를 매핑하도록 로직을 수정합니다. [cite: 1381-1389]

### 2.5. 프레젠테이션 계층 (Controller)

1.  **`BlogController.java` 수정**
    * `BlogService`가 `Board`를 반환하도록 수정되었으므로, 관련 메소드들의 로직을 업데이트합니다.
    * [cite_start]**신규 URL 매핑 `/board_list` (GET)**: [cite: 625-630]
        * `@GetMapping("/board_list")`를 추가합니다.
        * `blogService.findAll()` (Board 리스트)을 호출합니다.
        * [cite_start]Model에 `"boards"` (또는 "articles" [cite: 627])라는 이름으로 조회된 리스트를 추가합니다. [cite_start](이후 `board_list.html`의 `th:each` 변수명과 일치시켜야 함 [cite: 806])
        * `return "board_list";`를 반환합니다.
    * [cite_start]**신규 URL 매핑 `/board_view/{id}` (GET)**: [cite: 850-858]
        * `@GetMapping("/board_view/{id}")`를 추가합니다.
        * `@PathVariable Long id` 파라미터를 받습니다.
        * `blogService.findById(id)`를 호출하여 `Optional<Board>`를 받습니다.
        * `list.isPresent()`로 데이터 존재 여부를 확인합니다.
        * 데이터가 있으면 `model.addAttribute("boards", list.get())`로 Model에 추가하고 `return "board_view";`를 반환합니다.
        * 데이터가 없으면 `return "/error_page/article_error";` (또는 적절한 오류 처리)를 반환합니다.
    * [cite_start]**신규 URL 매핑 `/board_write` (GET/POST)**: [cite: 1294, 1364-1367]
        * `@GetMapping("/board_write")`: `return "board_write";`를 반환합니다.
        * `@PostMapping("/api/boards")`: `AddArticleRequest` DTO를 파라미터로 받아 `blogService.save(request)`를 호출하고, `return "redirect:/board_list";`를 반환합니다.
    * [cite_start]**신규 URL 매핑 (수정/삭제)**: [cite: 902-906, 951-953]
        * `@GetMapping("/board_edit/{id}")`: (연습문제) `findById`로 게시글을 찾아 Model에 담아 `board_edit.html`로 반환합니다.
        * `@DeleteMapping("/api/board_delete/{id}")`: (가정) `blogService.delete(id)` 호출 후 리다이렉트 (삭제 기능 구현 시).

### 2.6. 뷰 계층 (View / Templates)

1.  **`board_list.html` 생성**
    * `templates` 폴더에 `board_list.html` 파일을 생성합니다. (기존 `article_list.html` 복사) [cite_start][cite: 604-607]
    * [cite_start]`<title>`과 `<h1>` 태그 내용을 "블로그 게시판(new)" 등으로 수정합니다. [cite: 614, 620]
    * [cite_start]**테이블 헤더(`<thead>`) 수정**: [cite: 683-688]
        * `ID`, `제목` 외에 `작성자`, `작성일`, `조회수`, `좋아요` `<th>` 태그를 추가합니다.
        * [cite_start]`내용` `<th>`는 제거합니다. [cite: 676]
    * [cite_start]**테이블 본문(`<tbody>`) 수정**: [cite: 806-813]
        * `th:each` 변수명을 Controller에서 Model에 추가한 이름(예: `board : ${boards}`)으로 변경합니다.
        * `<td>` 태그들이 `board.id`, `board.title`, `board.user`, `board.newdate`, `board.count`, `board.likec` 값을 `th:text`로 출력하도록 수정합니다.
        * [cite_start]`제목` `<td>` 내부에 `<a>` 태그를 추가하고, `th:href="@{/board_view/{id}(id=${board.id})}"` 속성을 지정하여 상세 보기 링크를 겁니다. [cite: 828]
    * **글쓰기 버튼 추가**:
        * [cite_start]테이블 하단에 `<a class="btn btn-warning" th:href="@{/board_write}">글쓰기</a>` 버튼을 추가합니다. [cite: 1282]
    * [cite_start](기존 `article_list`에 있던 글쓰기 폼 `<div>`는 이 페이지에서 제거합니다. [cite: 677])

2.  **`board_view.html` 생성**
    * `templates` 폴더에 `board_view.html` 파일을 생성합니다. (기존 `board_list.html` 복사) [cite_start][cite: 864-865]
    * 기존 `board_list`의 테이블 구조를 활용하여, 게시글 상세 내용을 표시하도록 수정합니다.
    * `th:each`는 **단일 객체**를 받았으므로 `<tbody>`에서 **제거**하고, `boards` 객체의 필드를 직접 `th:text`로 출력합니다. [cite_start](PDF [cite: 874]는 `th:each`를 남겨뒀으나, 상세 보기에서는 단일 객체를 표시하는 것이 올바르므로 수정이 필요함. 만약 Controller가 `List`로 감싸서 보냈다면 PDF대로 `th:each` 사용)
    * [cite_start]`<td>` 태그에 `th:text="${boards.content}"`를 추가하여 본문 내용을 표시합니다. [cite: 876]
    * [cite_start]**수정/삭제 버튼 추가**: [cite: 901-907]
        * `<a class="btn btn-warning" th:href="@{/board_edit/{id}(id=${boards.id})}">수정</a>`
        * `<form th:action="@{/api/board_delete/{id}(id=${boards.id})}" method="post" style="display:inline;">`
            * `<input type="hidden" name="_method" value="delete">` (스프링 부트 `HiddenHttpMethodFilter` 사용 시)
            * `<button type="submit" class="btn btn-danger">삭제</button>`
        * </form>

3.  **`board_write.html` 생성**
    * `templates` 폴더에 `board_write.html` 파일을 생성합니다. (기존 `article_list.html` 복사) [cite_start][cite: 1299]
    * [cite_start]기존 테이블 목록(`<table>...</table>`)을 **제거**합니다. [cite: 1319]
    * [cite_start]`article_list.html`의 글쓰기 폼(`... </form>`)을 여기에 **붙여넣기**합니다. [cite: 1320-1334]
    * [cite_start]폼의 `th:action`을 `@"/api/boards"`로, `method`를 `post`로 설정합니다. [cite: 1323]
    * `title`, `content` 입력 `<input>`, `<textarea>`를 유지합니다.
    * [cite_start]**숨겨진 필드(Hidden input) 추가**: [cite: 1343-1353]
        * `user`, `newdate`, `count`, `likec` 값을 전송하기 위해 `<input type="hidden">` 태그들을 `</form>` 태그 직전에 추가합니다. (초기값은 임시로 "GUEST", "오늘날짜", "0" 등으로 설정)

4.  **`board_edit.html` 생성 (연습 문제)**
    * `templates` 폴더에 `board_edit.html` 파일을 생성합니다.
    * `board_write.html`의 폼 구조를 재활용하여, Controller에서 Model로 전달받은 `Board` 객체의 값(`th:value="${board.title}"`)으로 폼이 미리 채워지도록 수정합니다.
    * 폼의 `th:action`은 PUT 또는 POST 방식으로 `/api/board_update/{id}` (예시)를 호출하도록 설정합니다.

### 2.7. 데이터베이스 초기화

1.  **테스트 데이터 삽입**
    * 애플리케이션을 1회 실행하여 `board` 테이블이 `ddl-auto`에 의해 생성되었는지 확인합니다.
    * VS Code DB 확장 기능 또는 MySQL CLI를 사용하여, 생성된 `board` 테이블에 **최소 3개 이상의 테스트 데이터**를 `INSERT` 쿼리로 삽입합니다. (모든 컬럼 포함) [cite_start][cite: 704-726]

---